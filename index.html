<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap demo</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.39/Tone.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat+Alternates:wght@100&display=swap');

        * {
            margin: 0;
            padding: 0;
            font-family: 'Montserrat Alternates', sans-serif;
        }

        html,
        body {
            width: 100%;
            height: 100%;
            overflow: hidden;
            position: relative;
        }

        #video {
            opacity: 1;
            position: absolute;
            filter: invert(1);
            filter: grayscale(1);
            transform: scale(1.2);
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        #cover {
            z-index: 1;
            display: inline-block;
            position: absolute;
            background-color: rgba(32, 32, 32, 0.5);
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            padding: 4rem;
            color: white;
            font-size: 2rem;
        }

        #title {
            border: 1px solid white;
            margin: 1rem;
        }

        pre {
            font-size: 1.5rem;
            font-family: 'Montserrat Alternates', sans-serif;
        }

        h1 {
            margin: 1rem;
        }


        .key {
            width: 30px;
            height: 200px;
            display: inline-block;
            text-align: center;
        }

        .animation {
            animation: frame_white 0.5s infinite ease-in;
        }

        .red {
            background-color: #ff0000;

        }

        .orange {
            background-color: #ffa500;
        }

        .blue {
            background-color: #0000ff;
        }

        .yellow {
            background-color: #ffff00;
        }

        .chartreuse {
            background-color: #7fff00;
        }

        .green {
            background-color: #008000;
        }

        .cyan {
            background-color: #00ffff;
        }

        .purple {
            background-color: #800080;
        }

        .sequence {
            display: inline-block;
            height: 1rem;
            width: 1rem;

        }



        @keyframes frame_white {
            0% {
                height: 200px;
                overflow: hidden;

            }

            80% {
                height: 180px;
                overflow: hidden;
            }


            100% {
                height: 200px;
                overflow: hidden;
            }
        }

        #main {
            width: 100%;
            height: 100%;
            position: absolute;
        }

        .note {}
    </style>
</head>

<body>
    <div id="main">

    </div>

    <div id="cover">
        <div id="title">
            <h1>
                Dream Theme
            </h1>
            <h6>&nbsp;&nbsp; Virtual Piano Music Sheet &nbsp;&nbsp;&nbsp;</h6>
            <pre>
  <span class="note">t</span><span class="note">u</span><span class="note">o</span><span class="note">a</span><span class="note">s</span><span class="note">h</span>
  <span class="note">t</span><span class="note">u</span><span class="note">o</span><span class="note">a</span><span class="note">s</span><span class="note">h</span>
  <span class="note">t</span><span class="note">u</span><span class="note">o</span><span class="note">a</span><span class="note">s</span><span class="note">h</span>
  <span class="note">t</span><span class="note">u</span><span class="note">o</span><span class="note">a</span><span class="note">s</span><span class="note">h</span>
  
  <span class="note">r</span><span class="note">u</span><span class="note">o</span><span class="note">a</span><span class="note">s</span><span class="note">h</span>
  <span class="note">r</span><span class="note">u</span><span class="note">o</span><span class="note">a</span><span class="note">s</span><span class="note">h</span>
  <span class="note">r</span><span class="note">u</span><span class="note">o</span><span class="note">a</span><span class="note">s</span><span class="note">h</span>
  <span class="note">r</span><span class="note">u</span><span class="note">o</span><span class="note">a</span><span class="note">s</span><span class="note">h</span>
  
  <span class="note">e</span><span class="note">u</span><span class="note">o</span><span class="note">a</span><span class="note">s</span><span class="note">h</span>
  <span class="note">e</span><span class="note">u</span><span class="note">o</span><span class="note">a</span><span class="note">s</span><span class="note">h</span>
  <span class="note">e</span><span class="note">u</span><span class="note">o</span><span class="note">a</span><span class="note">s</span><span class="note">h</span>
  <span class="note">e</span><span class="note">u</span><span class="note">o</span><span class="note">a</span><span class="note">s</span><span class="note">h</span>
  
  <span class="note">w</span><span class="note">u</span><span class="note">o</span><span class="note">a</span><span class="note">s</span><span class="note">h</span>
  <span class="note">w</span><span class="note">u</span><span class="note">o</span><span class="note">a</span><span class="note">s</span><span class="note">h</span>
  <span class="note">w</span><span class="note">u</span><span class="note">o</span><span class="note">a</span><span class="note">s</span><span class="note">h</span>
  
  <span class="note">l</span><span class="note">k</span><span class="note">j</span><span class="note">f</span><span class="note">s</span><span class="note">a</span>
</pre>
        </div>
    </div>
    <video id="video" src="main.mp4" controls autoplay muted></video>

</body>
<script>
    const synth = new Tone.PolySynth(Tone.Synth).toDestination();
    const now = Tone.now();
    var colors = ['red', 'orange', 'yellow', 'chartreuse', 'green', 'cyan', 'purple'];
    var keyNotes = ['C', 'D', 'E', 'F', 'G', 'A', 'B'];
    var keys = ['1', '2', '3', '4', '5', '6', '7', '8', '9', '0', 'q', 'w', 'e', 'r', 't', 'y', 'u', 'i', 'o', 'p', 'a', 's', 'd', 'f', 'g', 'h', 'j', 'k', 'l', 'z', 'x', 'c', 'v', 'b', 'n', 'm'];
    var keyIndex = 0;
    var noteIndex = 0;
    var keyMap = new Map();
    class PianoButton {
        constructor(key, keyNote, color) {
            this.key = key;
            this.html = `
                <div id="${keyNote}" class='key ${color}'>
                    ${key}
                </div>
            `;
            //console.log(this.html);
        }
    }
    var main = document.getElementById('main');
    for (j = 2; j <= 7; j++) {
        for (var i = 0; i < keyNotes.length && keyIndex < keys.length; i++) {
            keyMap.set(keys[keyIndex], keyNotes[i] + j);
            var pianoButton = new PianoButton(keys[keyIndex], keyNotes[i] + j, colors[keyIndex % colors.length]);
            main.innerHTML += pianoButton.html;
            keyIndex++;
        }
    }
    console.log(keyMap);
    var notes = document.getElementsByClassName('note');
    document.body.addEventListener('keypress', function (e) {
        var target = keyMap.get(e.key);
        var buttonElement = document.getElementById(target);
        try {
            const synth = new Tone.PolySynth(Tone.Synth).toDestination();
            console.log(buttonElement);
            buttonElement.classList.add('animation');
            setTimeout(function (e) {
                buttonElement.classList.remove('animation');
            }, 500);
            console.log(e.key);
            synth.triggerAttackRelease(keyMap.get(e.key), '16n');
            notes[noteIndex].style.color = 'rgba(0,0,0,0)';
            noteIndex++;
        } catch (exception) {
        }
        

    });

</script>
<script>

</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2"
    crossorigin="anonymous"></script>

</html>